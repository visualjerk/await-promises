{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["class AwaitPromises {\n  constructor() {\n    this.promises = []\n    this.OldPromise = null\n  }\n\n  collect() {\n    const that = this\n    this.OldPromise = Promise\n\n    Promise = class Promise extends this.OldPromise {\n      constructor() {\n        super(...arguments)\n        that.promises.push(this)\n      }\n    }\n  }\n\n  stop() {\n    Promise = this.OldPromise\n  }\n\n  wait() {\n    return Promise.all(this.promises)\n  }\n}\n\nexport default AwaitPromises\n\nexport async function wait(func) {\n  const waiter = new AwaitPromises()\n  waiter.collect()\n  await func()\n  waiter.stop()\n  await waiter.wait()\n}\n"],"names":["AwaitPromises","[object Object]","this","promises","OldPromise","that","Promise","super","arguments","push","all","async","func","waiter","collect","stop","wait"],"mappings":"8MAAA,MAAMA,EACJC,cACEC,KAAKC,SAAW,GAChBD,KAAKE,WAAa,KAGpBH,UACE,MAAMI,EAAOH,KACbA,KAAKE,WAAaE,QAElBA,QAAU,cAAsBJ,KAAKE,WACnCH,cACEM,SAASC,WACTH,EAAKF,SAASM,KAAKP,QAKzBD,OACEK,QAAUJ,KAAKE,WAGjBH,OACE,OAAOK,QAAQI,IAAIR,KAAKC,8BAMrBQ,eAAoBC,GACzB,MAAMC,EAAS,IAAIb,EACnBa,EAAOC,gBACDF,IACNC,EAAOE,aACDF,EAAOG"}